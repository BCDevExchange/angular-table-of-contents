angular.module("angular-toc",["duScroll"]),angular.module("angular-toc").directive("bdToc",["$timeout","$compile","$rootScope",function(a,b,c){var d=function(a){return{$el:angular.element(a),slug:function(a){return a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},render:function(){var a=this.$el.text();this.$el.attr("id",this.slug(a));var b='<li du-scrollspy="'+this.slug(a)+'"><a href="#'+this.slug(a)+'" du-smooth-scroll offset="80">'+a+"</a></li>";return b}}};return{restrict:"E",link:function(e,f,g){a(function(){var a=g.selector||".toc-item",c=document.querySelectorAll(a);f.append('<ul class="nav" />'),angular.forEach(c,function(a){a.offsetHeight>0&&f.find("ul").append(b(new d(a).render())(e))})}),c.$on("bdTocUpdate",function(){a(function(){if(f){var a=g.selector||".toc-item",c=document.querySelectorAll(a);angular.forEach(c,function(a){a.offsetHeight>0&&f.find("ul").append(b(new d(a).render())(e))})}})}),e.$on("$destroy",function(){f=null})}}}]);